{% extends "base.html" %}

{% block title %}Badge{% endblock %}

{% block body %}

{% if current_user %}

    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="/museum/gamify/">
                    Hello {{ current_user.name }}
                </a>
            </div>
            <ul class="nav navbar-nav">
                <li class="active"><a href="/museum/gamify/">Home</a></li>
                <li><a href="#">Profile</a></li>
                <li><a href="#">Leaderboard</a></li>
                <li><a href="/museum/gamify/logout">Logout</a></li>
            </ul>
        </div>
    </nav>
<input type="hidden" id="mydiv" name="mydiv" value="{{ div_id }}">
<table style="width:50%;margin-left:25%;margin-top:5%">
    <tr>
        <td>
            <h3> Quiz Game </h3>
            <button class="btn btn-primary"><a id="prev">Prev</a></button>
            <button class="btn btn-primary"><a id="next">Next</a></button>
        </td>
    </tr>
    <tr>
    <td>
    <br>
        {% set count = 1 %}
        <div class="questiondivs">
        {% for question in questions %}
            <div class="w3-container">
                <form class="questions" action="/museum/gamify/users/quiz-answer" method="post">
                <a name="qdiv{{ count }}"></a>
                <input type="hidden" name="gameid" value={{ gameid }}>
                <input type="hidden" name="questionid" value={{ question.id }}>
                <input type="hidden" name="points" value={{ question.points }}>
                <input type="hidden" name="badge_id" value={{ question.badgeid }}>
                <input type="hidden" name="div_id" value="{{count}}">


                    <p> {{ count }}. {{ question.question }} </p>

                {% if question.answered %}
                    <p> You have earned : {{ question.userpoints }} points</p>

                    {% for opt in question.options %}

                    {% if opt.iscorrect %}
                    <input type="checkbox"  disabled="true" checked name="option[]" value="{{opt.id}}"/> {{ opt.option }}
                    {% else %}
                    <input type="checkbox"  disabled="true" name="option[]" value="{{opt.id}}"/> {{ opt.option }}
                    {% endif %}

                    <br><br>
                    {% endfor %}

                    {% if question.userpoints>0 %}
                        <p> Great work! </p>
                    {% else %}
                        <p> Wrong answer! </p>
                    {% endif %}

                    <p>{{ question.description }}</p>
                    <input  class="btn btn-success" disabled="true" type="submit" name="submit"/>
                {% else %}

                    <p> Unanswered question </p>
                    {% for opt in question.options %}
                    <input type="checkbox"  name="option[]" value="{{opt.id}}"/> {{ opt.option }}
                    <br><br>
                    {% endfor %}
                    <input  class="btn btn-success" type="submit" name="submit"/>
                {% endif %}
                {% set count = count + 1 %}
                </form>
            </div>
        {% endfor %}
        </div>
    </td>
    </tr>
</table>
{% else %}

        <a href="/museum/gamify/signup/new">Sign Up</a>
        <a href="/museum/gamify/login">Log In</a>

{% endif %}
{% endblock %}