{% extends "base.html" %}

{% block title %}Scavenger Hunt{% endblock %}

{% block body %}

{% if current_user %}

<nav class="navbar navbar-inverse">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="/museum/gamify/admin">
                Hello {{ current_user.name }}
            </a>
        </div>
        <ul class="nav navbar-nav">
            <li class="active"><a href="/museum/gamify/admin">Home</a></li>
            <li><a href="/museum/gamify/notificationcontroller/new">Notification</a></li>
            <li><a href="/museum/gamify/logout">Logout</a></li>
        </ul>
    </div>
</nav>

<div style="text-align: center">
    <h2>Question</h2>
    <form class="question-form" action="/museum/gamify/questioncontroller/add" method="post">
        <input hidden name="game_type_id" id="game_type_id" value="{{ game_type_id }}"/>
        <div style="margin: 3%">
            <label for="question">Q</label>
            <textarea id="question" name="question" placeholder="Enter Question" rows="2" cols="50"
                      style="border: none;outline: 0;border-bottom: 2px solid blue; resize: none"></textarea>
            <label for="points">Points</label>
            <input type="number" id="points" name="points" min="0" max="100" value="0">
            <label for="select-badge">Select Badge</label>
            <select id="select-badge" name="select-badge">
                <option value="0">Select Badge</option>
                {% for badge in badges %}
                <option value="{{ badge.id }}">{{ badge.name }}</option>
                {% endfor %}
            </select>
            <div id="badges" data-badges="{{ badges|json_encode }}"></div>
        </div>
        <div style="margin: 3%" id="option1">
            <textarea id="optionA1" name="option[optionA1]" placeholder="Enter Option" rows="1" cols="30"
                      style="border: none;outline: 0;border-bottom: 2px solid blue;resize: none"></textarea>
            <input type="checkbox" name="options[]" value="optionA1"/>
            <input type="number" name="point[optionA1]" min="0" max="100" value="0">
            <select name="select-badges[optionA1]">
                <option value="0">Select Badge</option>
                {% for badge in badges %}
                <option value="{{ badge.id }}">{{ badge.name }}</option>
                {% endfor %}
            </select>
        </div>
        <div style="margin: 3%" id="option2">
            <textarea id="optionA2" name="option[optionA2]" placeholder="Enter Option" rows="1" cols="30"
                      style="border: none;outline: 0;border-bottom: 2px solid blue;resize: none"></textarea>
            <input type="checkbox" name="options[]" value="optionA2"/>
            <input type="number" name="point[optionA2]" min="0" max="100" value="0">
            <select name="select-badges[optionA2]">
                <option value="0">Select Badge</option>
                {% for badge in badges %}
                <option value="{{ badge.id }}">{{ badge.name }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="addOptionsBtn">
            <button id="addOptions" name="addOptions">+</button>
        </div>
        <div style="margin: 3%">
            <button type="submit" name="done">Done</button>
        </div>
    </form>
</div>

{% else %}
<a href="/museum/gamify/signup/new">Sign Up</a>
<a href="/museum/gamify/login">Log In</a>
{% endif %}

<script>
    $(document).ready(function () {
        var i = 3;
        $("#addOptions").click(function (e) {
            e.preventDefault();
            var container = document.createElement('div');
            $(container).css({margin: '3%'});
            container.id = "option" + i;
            $(container).append('<textarea id="optionA2" name="option[optionA' + i + ']" placeholder="Enter Option" rows="1" cols="30" style="border: none;outline: 0;border-bottom: 2px solid blue;resize: none"></textarea>');
            $(container).append('<input type="checkbox" name="options[]" value="optionA' + i + '"/>');
            $(container).append('<input type="button" class="deleteOption" id="option' + i + '" value="-"/>');
            $(container).append('<input type="number" name="point[optionA' + i + ']" min="0" max="100" value="0">');
            var select_container = document.createElement("select");
            select_container.name = "select-badges[optionA" + i + "]";
            var opt = document.createElement('option');
            opt.value = 0;
            opt.text = "Select Badge";
            select_container.appendChild(opt);
            var badges = $('#badges').data("badges");
            for (var j = 0; j < badges.length; j++) {
                opt = document.createElement('option');
                opt.value = badges[j].id;
                opt.text = badges[j].name;
                select_container.appendChild(opt);
            }
            container.appendChild(select_container);
            $(".addOptionsBtn").before(container);
            i++;
        });
    });
</script>

{% endblock %}